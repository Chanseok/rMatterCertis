     Running BeforeDevCommand (`npm run dev`)

  VITE v6.3.5  ready in 260 ms

  ➜  Local:   http://localhost:1420/
     Running DevCommand (`cargo  run --no-default-features --features modern-ui,event-driven,telemetry,simulate-details --color always --`)
        Info Watching /Users/chanseok/Codes/rMatterCertis/src-tauri for changes...
[1m[32m   Compiling[0m objc2-exception-helper v0.1.1
[1m[32m   Compiling[0m ring v0.17.14
[1m[32m   Compiling[0m libsqlite3-sys v0.30.1
[1m[33mwarning[0m[1m:[0m matter-certis-v2@0.2.0: Generated unified types index with 105 exports
[1m[36m    Building[0m [======================>  ] 726/775: objc2-exception-helper(bu...[K[1m[32m   Compiling[0m objc2 v0.6.1
[1m[36m    Building[0m [======================>  ] 727/775: ring(build), objc2(build)...[1m[36m    Building[0m [======================>  ] 727/775: objc2-exception-helper, r...[1m[36m    Building[0m [======================>  ] 728/775: ring(build), objc2(build)...[1m[36m    Building[0m [======================>  ] 729/775: ring(build), objc2(build)...[1m[36m    Building[0m [======================>  ] 730/775: ring(build), libsqlite3-s...[1m[36m    Building[0m [======================>  ] 731/775: ring(build), objc2, libsq...[1m[36m    Building[0m [======================>  ] 732/775: ring(build), objc2          [K[1m[32m   Compiling[0m block2 v0.6.1
[1m[32m   Compiling[0m objc2-core-foundation v0.3.1
[1m[36m    Building[0m [======================>  ] 732/775: objc2-core-foundation, ri...[1m[36m    Building[0m [======================>  ] 733/775: objc2-core-foundation, ri...[K[1m[32m   Compiling[0m rustls v0.23.29
[1m[36m    Building[0m [======================>  ] 734/775: ring, objc2-core-foundati...[K[1m[32m   Compiling[0m dispatch2 v0.2.0
[1m[36m    Building[0m [======================>  ] 734/775: ring, dispatch2, objc2-co...[1m[36m    Building[0m [======================>  ] 735/775: ring, dispatch2, objc2-co...[K[1m[32m   Compiling[0m objc2-foundation v0.3.1
[1m[32m   Compiling[0m objc2-core-graphics v0.3.1
[1m[36m    Building[0m [======================>  ] 735/775: ring, dispatch2, objc2-co...[1m[36m    Building[0m [======================>  ] 736/775: ring, dispatch2, rustls(b...[1m[36m    Building[0m [======================>  ] 737/775: ring, rustls(build), ring...[K[1m[32m   Compiling[0m rustls-webpki v0.103.4
[1m[36m    Building[0m [======================>  ] 737/775: ring, rustls-webpki, rust...[1m[36m    Building[0m [======================>  ] 738/775: rustls-webpki, rustls-web...[1m[36m    Building[0m [======================>  ] 739/775: rustls-webpki, rustls-web...[1m[36m    Building[0m [======================>  ] 740/775: rustls-webpki, rustls-web...[1m[36m    Building[0m [======================>  ] 741/775: rustls-webpki, rustls(bui...[1m[36m    Building[0m [======================>  ] 742/775: rustls(build), objc2-foun...[1m[36m    Building[0m [======================>  ] 743/775: rustls, objc2-foundation,...[K[1m[32m   Compiling[0m sqlx-core v0.8.6
[1m[36m    Building[0m [======================>  ] 743/775: sqlx-core, rustls, objc2-...[1m[36m    Building[0m [=======================> ] 744/775: sqlx-core, objc2-foundati...[1m[36m    Building[0m [=======================> ] 744/775: sqlx-core, sqlx-core, obj...[1m[36m    Building[0m [=======================> ] 745/775: sqlx-core, sqlx-core, obj...[K[1m[32m   Compiling[0m sqlx-sqlite v0.8.6
[1m[32m   Compiling[0m sqlx-postgres v0.8.6
[1m[36m    Building[0m [=======================> ] 745/775: sqlx-core, sqlx-core, sql...[1m[36m    Building[0m [=======================> ] 746/775: sqlx-core, sqlx-sqlite, s...[1m[36m    Building[0m [=======================> ] 747/775: sqlx-sqlite, sqlx-postgre...[1m[36m    Building[0m [=======================> ] 748/775: sqlx-sqlite, sqlx-postgre...[1m[36m    Building[0m [=======================> ] 749/775: sqlx-postgres, objc2-foun...[1m[36m    Building[0m [=======================> ] 750/775: objc2-foundation, sqlx-po...[K[1m[32m   Compiling[0m sqlx-macros-core v0.8.6
[1m[36m    Building[0m [=======================> ] 750/775: sqlx-macros-core, objc2-f...[1m[36m    Building[0m [=======================> ] 751/775: sqlx-macros-core, objc2-f...[K[1m[32m   Compiling[0m sqlx-macros v0.8.6
[1m[36m    Building[0m [=======================> ] 752/775: sqlx-macros, objc2-founda...[K[1m[32m   Compiling[0m objc2-core-image v0.3.1
[1m[32m   Compiling[0m objc2-cloud-kit v0.3.1
[1m[32m   Compiling[0m objc2-quartz-core v0.3.1
[1m[32m   Compiling[0m objc2-core-data v0.3.1
[1m[36m    Building[0m [=======================> ] 752/775: objc2-cloud-kit, objc2-co...[1m[36m    Building[0m [=======================> ] 753/775: objc2-cloud-kit, objc2-co...[1m[36m    Building[0m [=======================> ] 754/775: objc2-core-image, objc2-q...[1m[36m    Building[0m [=======================> ] 755/775: objc2-quartz-core, sqlx-m...[1m[36m    Building[0m [=======================> ] 756/775: objc2-quartz-core, sqlx-m...[K[1m[32m   Compiling[0m objc2-app-kit v0.3.1
[1m[36m    Building[0m [=======================> ] 756/775: objc2-app-kit, objc2-quar...[1m[36m    Building[0m [=======================> ] 757/775: objc2-app-kit, sqlx-macros  [K[1m[32m   Compiling[0m sqlx v0.8.6
[1m[36m    Building[0m [=======================> ] 758/775: objc2-app-kit, sqlx         [1m[36m    Building[0m [=======================> ] 759/775: objc2-app-kit               [K[1m[32m   Compiling[0m objc2-web-kit v0.3.1
[1m[32m   Compiling[0m tao v0.34.0
[1m[32m   Compiling[0m window-vibrancy v0.6.0
[1m[32m   Compiling[0m muda v0.17.0
[1m[32m   Compiling[0m rfd v0.15.3
[1m[36m    Building[0m [=======================> ] 759/775: window-vibrancy, objc2-we...[1m[36m    Building[0m [=======================> ] 760/775: window-vibrancy, objc2-we...[1m[36m    Building[0m [=======================> ] 761/775: objc2-web-kit, muda, rfd,...[1m[36m    Building[0m [=======================> ] 762/775: objc2-web-kit, muda, tao    [1m[36m    Building[0m [=======================> ] 763/775: objc2-web-kit, tao          [1m[36m    Building[0m [=======================> ] 764/775: objc2-web-kit               [K[1m[32m   Compiling[0m wry v0.52.1
[1m[36m    Building[0m [=======================> ] 764/775: objc2-web-kit, wry          [1m[36m    Building[0m [=======================> ] 765/775: wry                         [K[1m[32m   Compiling[0m tauri-runtime-wry v2.7.1
[1m[36m    Building[0m [=======================> ] 765/775: tauri-runtime-wry, wry      [1m[36m    Building[0m [=======================> ] 766/775: tauri-runtime-wry           [K[1m[32m   Compiling[0m tauri v2.6.2
[1m[36m    Building[0m [=======================> ] 766/775: tauri-runtime-wry, tauri    [1m[36m    Building[0m [=======================> ] 767/775: tauri                       [K[1m[32m   Compiling[0m tauri-plugin-fs v2.4.0
[1m[32m   Compiling[0m tauri-plugin-shell v2.3.0
[1m[32m   Compiling[0m tauri-plugin-opener v2.4.0
[1m[32m   Compiling[0m tauri-plugin-store v2.3.0
[1m[36m    Building[0m [=======================> ] 767/775: tauri-plugin-fs, tauri, t...[1m[36m    Building[0m [=======================> ] 768/775: tauri-plugin-fs, tauri-pl...[1m[36m    Building[0m [=======================> ] 769/775: tauri-plugin-fs, tauri-pl...[1m[36m    Building[0m [=======================> ] 770/775: tauri-plugin-fs, tauri-pl...[1m[36m    Building[0m [=======================> ] 771/775: tauri-plugin-fs             [K[1m[32m   Compiling[0m tauri-plugin-dialog v2.3.0
[1m[36m    Building[0m [=======================> ] 771/775: tauri-plugin-fs, tauri-pl...[1m[36m    Building[0m [=======================> ] 772/775: tauri-plugin-dialog         [K[1m[32m   Compiling[0m matter-certis-v2 v0.2.0 (/Users/chanseok/Codes/rMatterCertis/src-tauri)
[1m[36m    Building[0m [=======================> ] 773/775: matter-certis-v2            [1m[36m    Building[0m [=======================> ] 774/775: matter-certis-v2(bin)       [K[1m[32m    Finished[0m ]8;;https://doc.rust-lang.org/cargo/reference/profiles.html#default-profiles\`dev` profile [unoptimized + debuginfo]]8;;\ target(s) in 30.68s
[1m[32m     Running[0m `target/debug/matter-certis-v2`
[2m2025-08-16 11:16:18.383 +09:00[0m [32m INFO[0m 🚀 Startup: level=info, concise=on, outputs={console:true,file:true}, dir="/Users/chanseok/Codes/rMatterCertis/src-tauri/target/debug/logs"
[2m2025-08-16 11:16:18.383 +09:00[0m [32m INFO[0m Frontend logging configured (unified): "/Users/chanseok/Codes/rMatterCertis/src-tauri/target/debug/logs/back_front.log"
[2m2025-08-16 11:16:18.384 +09:00[0m [32m INFO[0m 🚀 Starting Matter Certis v2 application
[2m2025-08-16 11:16:18.384 +09:00[0m [32m INFO[0m 📋 Configuration loaded successfully
[2m2025-08-16 11:16:18.384 +09:00[0m [32m INFO[0m ✅ Tokio runtime initialized successfully
[2m2025-08-16 11:16:18.384 +09:00[0m [32m INFO[0m 📁 메인 DB: /Users/chanseok/Library/Application Support/matter-certis-v2/database/matter_certis.db
[2m2025-08-16 11:16:18.390 +09:00[0m [32m INFO[0m 🗄️ DB ready: products=1106, details=1106
[2m2025-08-16 11:16:18.390 +09:00[0m [32m INFO[0m 🔧 Building Tauri application...
[2m2025-08-16 11:16:18.390 +09:00[0m [32m INFO[0m ✅ Tauri application built successfully, starting...
[2m2025-08-16 11:16:18.862 +09:00[0m [32m INFO[0m 🔧 Initializing unified backend services...
[2m2025-08-16 11:16:18.862 +09:00[0m [32m INFO[0m ✅ Database connection pool initialized
[2m2025-08-16 11:16:18.862 +09:00[0m [32m INFO[0m ✅ Event emitter initialized
[2m2025-08-16 11:16:18.862 +09:00[0m [32m INFO[0m � Starting system state broadcaster...
[2m2025-08-16 11:16:18.862 +09:00[0m [32m INFO[0m 🎯 Unified backend services initialization complete
[2m2025-08-16 11:16:20.305 +09:00[0m [32m INFO[0m 📁 Loading window state
[2m2025-08-16 11:16:20.511 +09:00[0m [32m INFO[0m 🌐 Advanced site status check requested
[2m2025-08-16 11:16:20.511 +09:00[0m [32m INFO[0m 📭 No cached site analysis found
[2m2025-08-16 11:16:20.511 +09:00[0m [32m INFO[0m ⏰ No valid cached site analysis found - performing fresh site check
[2m2025-08-16 11:16:20.511 +09:00[0m [32m INFO[0m 🔄 Starting real site status check...
[2m2025-08-16 11:16:20.512 +09:00[0m [32m INFO[0m 🔧 HttpClient using config: max_requests_per_second=50
[2m2025-08-16 11:16:20.514 +09:00[0m [32m INFO[0m Starting comprehensive site status check with detailed page discovery
[2m2025-08-16 11:16:20.514 +09:00[0m [32m INFO[0m Checking site status and discovering pages...
[2m2025-08-16 11:16:20.514 +09:00[0m [32m INFO[0m 🔧 HttpClient using config: max_requests_per_second=50
[2m2025-08-16 11:16:20.514 +09:00[0m [32m INFO[0m 🚀 GlobalRateLimiter initialized with 50 RPS (Token Bucket)
[2m2025-08-16 11:16:20.514 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:20.514 +09:00[0m [32m INFO[0m 🌐 HTTP GET (HttpClient): https://csa-iot.org/csa-iot_products/?p_keywords&p_type%5B0%5D=14&p_program_type%5B0%5D=1049&p_certificate&p_family&p_firmware_ver
[2m2025-08-16 11:16:21.077 +09:00[0m [32m INFO[0m Site is accessible
[2m2025-08-16 11:16:21.078 +09:00[0m [32m INFO[0m 🔍 Starting enhanced page discovery algorithm with site change detection
[2m2025-08-16 11:16:21.078 +09:00[0m [32m INFO[0m 📍 Starting from page 498 (last known: Some(498), default: 100)
[2m2025-08-16 11:16:21.078 +09:00[0m [32m INFO[0m 🔧 HttpClient using config: max_requests_per_second=50
[2m2025-08-16 11:16:21.079 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:21.079 +09:00[0m [32m INFO[0m 🌐 HTTP GET (HttpClient): https://csa-iot.org/csa-iot_products/page/498/?p_keywords&p_type%5B0%5D=14&p_program_type%5B0%5D=1049&p_certificate&p_family&p_firmware_ver
[2m2025-08-16 11:16:21.504 +09:00[0m [32m INFO[0m Total products found on page: 11 (using selector: div.post-feed article.type-product)
[2m2025-08-16 11:16:21.513 +09:00[0m [32m INFO[0m 🎯 Found active page number 498 using selector '.page-numbers.current'
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 📊 Page 498 analysis: has_products=true, product_count=11, max_pagination=498
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 🔍 Iteration 1/10: Checking page 498
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 🏁 No higher pages found in pagination, 498 appears to be the last page
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 🔍 Verifying candidate last page: 498
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 📊 Last page 498 has 11 products
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m ✅ Page 498 confirmed as last page via pagination analysis (max_pagination=498)
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 🚀 Skipping additional verification - pagination analysis is reliable
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 📝 Updated config: last_page=498, items_on_last_page=11, accurate_total_products=5975, timestamp=2025-08-16T02:16:21.514510+00:00
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m ✅ Successfully updated last known page to 498 in config file
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 🎉 Final verified last page: 498 with 11 products
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 📊 Updated pagination context: total_pages=498, items_on_last_page=11, products_per_page=12
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m Site status check completed: 498 pages found, 1000ms total time, health score: 1.00
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m Accurate product estimation: (497 full pages * 12 products) + 11 products on last page = 5975 total products
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 📊 Site data stable: 5975 products
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 🔍 Calculating crawling range recommendation from site status and DB analysis...
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 🏗️ [NEW ARCHITECTURE] Using SystemConfig-based intelligent strategy instead of hardcoded values
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m ✅ [NEW ARCHITECTURE] SystemConfig initialized: batch_sizes.small_db_multiplier=1
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m ✅ [NEW ARCHITECTURE] SystemConfig initialized: concurrency.high_load_multiplier=1.2
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 🔍 [DatabaseAnalyzer] Starting database analysis...
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 🔍 [DatabaseAnalyzer] Using database pool from IntegratedProductRepository
[2m2025-08-16 11:16:21.514 +09:00[0m [32m INFO[0m 🔍 [DatabaseAnalyzer] Testing database connection...
[2m2025-08-16 11:16:21.515 +09:00[0m [32m INFO[0m ✅ [DatabaseAnalyzer] Successfully retrieved total count from database: 1106
[2m2025-08-16 11:16:21.515 +09:00[0m [32m INFO[0m 📊 [DatabaseAnalyzer] Database analysis completed: 1106 total products
[2m2025-08-16 11:16:21.515 +09:00[0m [32m INFO[0m 🎉 [NEW ARCHITECTURE] CrawlingPlanner analysis successful! Site pages: 498, DB products: 1106
[2m2025-08-16 11:16:21.515 +09:00[0m [32m INFO[0m 🔍 Calculating crawling range recommendation...
[2m2025-08-16 11:16:21.524 +09:00[0m [32m INFO[0m 📊 Local DB status: max_page_id=98, max_index_in_page=9, total_products=1106
[2m2025-08-16 11:16:21.525 +09:00[0m [32m INFO[0m 📊 Last saved product index: 1185
[2m2025-08-16 11:16:21.525 +09:00[0m [32m INFO[0m 📊 Next product index to crawl: 1185
[2m2025-08-16 11:16:21.525 +09:00[0m [32m INFO[0m 📊 Target page to start crawling: 400
[2m2025-08-16 11:16:21.525 +09:00[0m [32m INFO[0m 📊 Crawling range: pages 400 to 396 (total: 5 pages)
[2m2025-08-16 11:16:21.525 +09:00[0m [32m INFO[0m 📊 Crawling range recommendation: Partial(5)
[2m2025-08-16 11:16:21.525 +09:00[0m [32m INFO[0m 🏢 사이트 분석 결과 캐시에 저장: 498 페이지, 5975 제품
[2m2025-08-16 11:16:21.527 +09:00[0m [32m INFO[0m 🎯 Calculating next crawling range with: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:21.527 +09:00[0m [32m INFO[0m Using database at: sqlite:/Users/chanseok/Library/Application Support/matter-certis-v2/database/matter_certis.db
[2m2025-08-16 11:16:21.527 +09:00[0m [32m INFO[0m 🎯 입력 파라미터: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:21.527 +09:00[0m [32m INFO[0m ⚙️ User settings: page_range_limit=5, intelligent_mode.enabled=true, max_range_limit=1000
[2m2025-08-16 11:16:21.527 +09:00[0m [32m INFO[0m 📊 Effective page limit for this crawling: 5
[2m2025-08-16 11:16:21.531 +09:00[0m [32m INFO[0m ✅ Successfully retrieved 1106 products from database
[2m2025-08-16 11:16:21.531 +09:00[0m [32m INFO[0m 🔍 Current max page_id in database: 98
[2m2025-08-16 11:16:21.531 +09:00[0m [32m INFO[0m 📍 Last crawled page: 400 (page_id: 98)
[2m2025-08-16 11:16:21.531 +09:00[0m [32m INFO[0m 🔍 Current page 400 has 10/12 products
[2m2025-08-16 11:16:21.531 +09:00[0m [32m INFO[0m ✅ Next crawling range: 400페이지 → 396페이지 (역순, 최대 5페이지)
[2m2025-08-16 11:16:21.535 +09:00[0m [32m INFO[0m 📊 Successfully retrieved 1106 products from database
[2m2025-08-16 11:16:21.535 +09:00[0m [32m INFO[0m 📊 Progress: 1106/5975 products (18.5%), last crawled page: 400 (page_id: 98)
[2m2025-08-16 11:16:21.535 +09:00[0m [32m INFO[0m 🔧 Creating batch plan for range: 400 to 396
[2m2025-08-16 11:16:21.535 +09:00[0m [32m INFO[0m 🔧 Creating batch plan: start_page=400, end_page=396
[2m2025-08-16 11:16:21.535 +09:00[0m [32m INFO[0m 📋 Batch plan configuration: batch_size=3, concurrency_limit=3
[2m2025-08-16 11:16:21.535 +09:00[0m [32m INFO[0m 📊 Batch plan calculation: total_pages=5, total_batches=2
[2m2025-08-16 11:16:21.535 +09:00[0m [32m INFO[0m 🔢 Batch 1: pages=[400, 399, 398], estimated_products=36
[2m2025-08-16 11:16:21.535 +09:00[0m [32m INFO[0m 🔢 Batch 2: pages=[397, 396], estimated_products=24
[2m2025-08-16 11:16:21.535 +09:00[0m [32m INFO[0m ✅ Batch plan created successfully: 2 batches, estimated duration: 12s
[2m2025-08-16 11:16:21.535 +09:00[0m [32m INFO[0m ✅ Next crawling range: pages 400 to 396 (total: 5 pages)
[2m2025-08-16 11:16:21.537 +09:00[0m [32m INFO[0m 📋 Fetching recent products from real database - page: 1, limit: 10
[2m2025-08-16 11:16:21.537 +09:00[0m [32m INFO[0m ✅ Retrieved 10 real products from database
[2m2025-08-16 11:16:21.542 +09:00[0m [32m INFO[0m 📊 Fetching real database statistics
[2m2025-08-16 11:16:21.544 +09:00[0m [32m INFO[0m ✅ Retrieved real database statistics: 1106 products
[2m2025-08-16 11:16:46.349 +09:00[0m [32m INFO[0m 🎯 Calculating next crawling range with: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:46.350 +09:00[0m [32m INFO[0m Using database at: sqlite:/Users/chanseok/Library/Application Support/matter-certis-v2/database/matter_certis.db
[2m2025-08-16 11:16:46.351 +09:00[0m [32m INFO[0m 🎯 입력 파라미터: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:46.351 +09:00[0m [32m INFO[0m ⚙️ User settings: page_range_limit=5, intelligent_mode.enabled=true, max_range_limit=1000
[2m2025-08-16 11:16:46.351 +09:00[0m [32m INFO[0m 📊 Effective page limit for this crawling: 5
[2m2025-08-16 11:16:46.366 +09:00[0m [32m INFO[0m ✅ Successfully retrieved 1106 products from database
[2m2025-08-16 11:16:46.366 +09:00[0m [32m INFO[0m 🔍 Current max page_id in database: 98
[2m2025-08-16 11:16:46.366 +09:00[0m [32m INFO[0m 📍 Last crawled page: 400 (page_id: 98)
[2m2025-08-16 11:16:46.366 +09:00[0m [32m INFO[0m 🔍 Current page 400 has 10/12 products
[2m2025-08-16 11:16:46.366 +09:00[0m [32m INFO[0m ✅ Next crawling range: 400페이지 → 396페이지 (역순, 최대 5페이지)
[2m2025-08-16 11:16:46.372 +09:00[0m [32m INFO[0m 📊 Successfully retrieved 1106 products from database
[2m2025-08-16 11:16:46.372 +09:00[0m [32m INFO[0m 📊 Progress: 1106/5975 products (18.5%), last crawled page: 400 (page_id: 98)
[2m2025-08-16 11:16:46.373 +09:00[0m [32m INFO[0m 🔧 Creating batch plan for range: 400 to 396
[2m2025-08-16 11:16:46.373 +09:00[0m [32m INFO[0m 🔧 Creating batch plan: start_page=400, end_page=396
[2m2025-08-16 11:16:46.373 +09:00[0m [32m INFO[0m 📋 Batch plan configuration: batch_size=3, concurrency_limit=3
[2m2025-08-16 11:16:46.373 +09:00[0m [32m INFO[0m 📊 Batch plan calculation: total_pages=5, total_batches=2
[2m2025-08-16 11:16:46.373 +09:00[0m [32m INFO[0m 🔢 Batch 1: pages=[400, 399, 398], estimated_products=36
[2m2025-08-16 11:16:46.373 +09:00[0m [32m INFO[0m 🔢 Batch 2: pages=[397, 396], estimated_products=24
[2m2025-08-16 11:16:46.373 +09:00[0m [32m INFO[0m ✅ Batch plan created successfully: 2 batches, estimated duration: 12s
[2m2025-08-16 11:16:46.373 +09:00[0m [32m INFO[0m ✅ Next crawling range: pages 400 to 396 (total: 5 pages)
[2m2025-08-16 11:16:46.374 +09:00[0m [32m INFO[0m 🧠 Creating ExecutionPlan with CrawlingPlanner (cache-aware)...
[2m2025-08-16 11:16:46.374 +09:00[0m [32m INFO[0m 📊 Using existing database pool from AppState
[2m2025-08-16 11:16:46.374 +09:00[0m [32m INFO[0m 🔍 Testing database connection before creating CrawlingPlanner...
[2m2025-08-16 11:16:46.374 +09:00[0m [32m INFO[0m ✅ Database connection successful: 1106 products found
[2m2025-08-16 11:16:46.375 +09:00[0m [32m INFO[0m 🔧 HttpClient using config: max_requests_per_second=50
[2m2025-08-16 11:16:46.375 +09:00[0m [32m INFO[0m 🎯 Analyzing system state with CrawlingPlanner (attempting cache reuse)...
[2m2025-08-16 11:16:46.375 +09:00[0m [32m INFO[0m 🎯 Using cached site analysis (analyzed: 02:16:21, age: 0 minutes)
[2m2025-08-16 11:16:46.375 +09:00[0m [32m INFO[0m ♻️ Reusing cached SiteStatus: total_pages=498, last_page_products=11 (age<=TTL)
[2m2025-08-16 11:16:46.375 +09:00[0m [32m INFO[0m 🧭 Choosing ContinueFromDb strategy (existing products=1106)
[2m2025-08-16 11:16:46.375 +09:00[0m [32m INFO[0m 🔍 [DatabaseAnalyzer] Starting database analysis...
[2m2025-08-16 11:16:46.375 +09:00[0m [32m INFO[0m 🔍 [DatabaseAnalyzer] Using database pool from IntegratedProductRepository
[2m2025-08-16 11:16:46.375 +09:00[0m [32m INFO[0m 🔍 [DatabaseAnalyzer] Testing database connection...
[2m2025-08-16 11:16:46.375 +09:00[0m [32m INFO[0m ✅ [DatabaseAnalyzer] Successfully retrieved total count from database: 1106
[2m2025-08-16 11:16:46.375 +09:00[0m [32m INFO[0m 📊 [DatabaseAnalyzer] Database analysis completed: 1106 total products
[2m2025-08-16 11:16:46.375 +09:00[0m [32m INFO[0m 📊 Range calculation settings: input_limit=5, user_limit=5, intelligent_mode=true, effective_limit=5
[2m2025-08-16 11:16:46.376 +09:00[0m [32m INFO[0m 🔍 DB state check: max_page_id=Some(98), max_index_in_page=Some(9)
[2m2025-08-16 11:16:46.379 +09:00[0m [32m INFO[0m 📊 Crawling range calculation:
[2m2025-08-16 11:16:46.379 +09:00[0m [32m INFO[0m   Last saved: page_id=98, index_in_page=9
[2m2025-08-16 11:16:46.379 +09:00[0m [32m INFO[0m   Last saved index: 1185
[2m2025-08-16 11:16:46.379 +09:00[0m [32m INFO[0m   Next product index: 1186
[2m2025-08-16 11:16:46.379 +09:00[0m [32m INFO[0m   Total products on site: 5975
[2m2025-08-16 11:16:46.379 +09:00[0m [32m INFO[0m   Forward index: 4788
[2m2025-08-16 11:16:46.379 +09:00[0m [32m INFO[0m   Target page: 400
[2m2025-08-16 11:16:46.379 +09:00[0m [32m INFO[0m   Crawl range: 400 to 396 (effective limit: 5)
[2m2025-08-16 11:16:46.379 +09:00[0m [32m INFO[0m 🔧 Computed ContinueFromDb range: db_last=(Some(98),Some(9)) pages=[400, 399, 398, 397, 396]
[2m2025-08-16 11:16:46.379 +09:00[0m [32m INFO[0m 📋 배치 계획 수립: 총 5페이지를 2개 배치로 분할 (batch_size=3)
[2m2025-08-16 11:16:46.379 +09:00[0m [32m INFO[0m 💽 DB 분석 결과 캐시에 저장: 1106 제품, max_page_id: Some(98), max_index_in_page: Some(9)
[2m2025-08-16 11:16:46.379 +09:00[0m [32m INFO[0m 🧪 CrawlingPlanner produced plan with Balanced (requested strategy ContinueFromDb)
[2m2025-08-16 11:16:46.380 +09:00[0m [32m INFO[0m 📋 CrawlingPlan created: CrawlingPlan { session_id: "crawling_d2cb01c7-92f6-4d3c-b94d-48d55d89a98c", phases: [CrawlingPhase { phase_type: StatusCheck, estimated_duration_secs: 30, priority: 1, pages: [] }, CrawlingPhase { phase_type: ListPageCrawling, estimated_duration_secs: 6, priority: 2, pages: [400, 399, 398] }, CrawlingPhase { phase_type: ListPageCrawling, estimated_duration_secs: 4, priority: 3, pages: [397, 396] }, CrawlingPhase { phase_type: DataValidation, estimated_duration_secs: 2, priority: 101, pages: [] }], total_estimated_duration_secs: 42, optimization_strategy: Balanced, created_at: 2025-08-16T02:16:46.379883Z, db_total_products: Some(1106), db_unique_products: Some(1106), db_last_update: Some(2025-08-16T02:16:46.375612Z) }
[2m2025-08-16 11:16:46.380 +09:00[0m [32m INFO[0m 🎯 Using cached db analysis (age: 62µs)
[2m2025-08-16 11:16:46.380 +09:00[0m [32m INFO[0m ♻️ Using cached DB analysis advisory: total_products=1106 (age TTL<=3m)
[2m2025-08-16 11:16:46.380 +09:00[0m [32m INFO[0m 🧾 DB snapshot: max_page_id=Some(98) max_index_in_page=Some(9) total_products_dbMetric=Some(1106)
[2m2025-08-16 11:16:46.380 +09:00[0m [32m INFO[0m 🆕 PlanCache miss (hash=f4e83c91fa9a5739f7fce64d590bf5e519ef868d9ee8d0f42dcc4bd15de39cb3) — creating new ExecutionPlan
[2m2025-08-16 11:16:46.380 +09:00[0m [32m INFO[0m 📐 canonical page_slots audit head=["p400=>gid98_i0", "p400=>gid98_i1", "p400=>gid98_i2", "p400=>gid98_i3", "p400=>gid98_i4"] tail=["p396=>gid102_i11", "p396=>gid102_i10", "p396=>gid102_i9", "p396=>gid102_i8", "p396=>gid102_i7"] total_slots=60
[2m2025-08-16 11:16:46.380 +09:00[0m [32m INFO[0m ✅ ExecutionPlan created successfully: 5 pages across 2 batches (hash=f4e83c91fa9a5739f7fce64d590bf5e519ef868d9ee8d0f42dcc4bd15de39cb3)
[2m2025-08-16 11:16:46.380 +09:00[0m [32m INFO[0m 🌉 Actor Event Bridge task spawned
[2m2025-08-16 11:16:46.380 +09:00[0m [32m INFO[0m 🌉 Starting Actor Event Bridge - connecting Actor events to Frontend
[2m2025-08-16 11:16:46.380 +09:00[0m [32m INFO[0m 🎭 Executing SessionActor with predefined ExecutionPlan...
[2m2025-08-16 11:16:46.380 +09:00[0m [32m INFO[0m 📋 Plan: 2 batches, batch_size: 3, effective_concurrency: 64
[2m2025-08-16 11:16:46.380 +09:00[0m [32m INFO[0m 🧮 Aggregated metrics => ranges: 2, expected_pages: 5, expected_batches: 2, batch_size: 3
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m [SessionTrace] BEFORE plan hash verify session_id=actor_session_1755310606
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m 🔐 ExecutionPlan integrity verified (hash=f4e83c91fa9a5739f7fce64d590bf5e519ef868d9ee8d0f42dcc4bd15de39cb3)
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m [SessionTrace] AFTER plan hash verify session_id=actor_session_1755310606
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m [ExecPlanDump] ranges_count=2 details=[(400, 398, true), (397, 396, true)]
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m [RangeLoop] ENTER range_idx=0 start_page=400 end_page=398 reverse=true total_ranges=2
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m 🎯 Range 1/2 start: pages 400 to 398 (3 pages => 1 batches, reverse: true)
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m [RangeLoop] BATCH ENTER range_idx=0 batch_index=0 pages=[400, 399, 398]
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m [RangeLoopTrace] BEFORE execute_real_batch_actor range_idx=0 batch_index=0
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m 🎯 BatchActor actor_session_1755310606_range0_batch0 starting REAL processing of 3 pages
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m 🔧 Creating BatchActor instance with real services...
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m 🔧 HttpClient using config: max_requests_per_second=50
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m ✅ HttpClient created (labeled)
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m ✅ MatterDataExtractor created
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m 🔧 Using database URL: sqlite:/Users/chanseok/Library/Application Support/matter-certis-v2/database/matter_certis.db
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m ✅ IntegratedProductRepository created with centralized database path
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m ✅ AppConfig provided from ExecutionPlan context
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m 📊 Using batch_size from config: 3
[2m2025-08-16 11:16:46.381 +09:00[0m [32m INFO[0m ✅ BatchActor created successfully with real services
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🔧 Creating communication channels...
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m ✅ Channels created successfully
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🔧 Creating BatchConfig...
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m ✅ BatchConfig created: BatchConfig { batch_size: 3, concurrency_limit: 3, batch_delay_ms: 1000, retry_on_failure: true, start_page: Some(400), end_page: Some(398) }
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🔧 Creating ProcessBatch command...
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m ✅ ProcessBatch command created
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🚀 Starting BatchActor task...
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m ✅ BatchActor task spawned
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 📡 Sending ProcessBatch command...
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m ✅ ProcessBatch command sent
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m ⏳ Waiting for BatchActor completion (deferred shutdown)...
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 📡 BatchActor.run() starting...
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🔄 BatchActor actor_session_1755310606_range0_batch0 starting execution loop
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🔄 [Batch START] actor=actor_session_1755310606_range0_batch0, batch_id=actor_session_1755310606_range0_batch0, pages=3, range=Some((Some(400), Some(398)))
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🧭 [Batch PLAN/APPLIED] planned=(Some(400), Some(398)) applied=Some((Some(400), Some(398))) count=3
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🎭 Using real StageActor-based processing for batch actor_session_1755310606_range0_batch0
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🧠 Using provided SiteStatus hints from Session: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🔍 Starting Stage 2: ListPageCrawling
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🔧 Applied site pagination hints: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🎯 StageActor stage_list_page_crawling_actor_session_1755310606_range0_batch0 executing stage ListPageCrawling with 3 items
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 📊 Using cached site analysis for single page 399: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 📊 Using cached site analysis for single page 398: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 📊 Using cached site analysis for single page 400: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa-iot_products/page/400/?p_keywords&p_type%5B0%5D=14&p_program_type%5B0%5D=1049&p_certificate&p_family&p_firmware_ver
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa-iot_products/page/398/?p_keywords&p_type%5B0%5D=14&p_program_type%5B0%5D=1049&p_certificate&p_family&p_firmware_ver
[2m2025-08-16 11:16:46.382 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa-iot_products/page/399/?p_keywords&p_type%5B0%5D=14&p_program_type%5B0%5D=1049&p_certificate&p_family&p_firmware_ver
[2m2025-08-16 11:16:47.203 +09:00[0m [32m INFO[0m 🎯 Found active page number 398 using selector '.page-numbers.current'
[2m2025-08-16 11:16:47.204 +09:00[0m [32m INFO[0m ✅ Real list page processing successful for page 398: 12 URLs collected
[2m2025-08-16 11:16:47.208 +09:00[0m [32m INFO[0m 🎯 Found active page number 399 using selector '.page-numbers.current'
[2m2025-08-16 11:16:47.209 +09:00[0m [32m INFO[0m ✅ Real list page processing successful for page 399: 12 URLs collected
[2m2025-08-16 11:16:47.488 +09:00[0m [32m INFO[0m 🎯 Found active page number 400 using selector '.page-numbers.current'
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m ✅ Real list page processing successful for page 400: 12 URLs collected
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m ✅ Stage ListPageCrawling completed successfully: 3/3 items processed
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m ✅ Stage 2 (ListPageCrawling) completed: 3 success, 0 failed
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m 🔄 ListPageCrawling → ProductDetailCrawling: extracting ProductUrls from collected data
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m ✅ Extracted page 400 URLs: original=12 after_dedupe=12 skipped=0 recent_cache_size=12 recent_set_size=12
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m ✅ Extracted page 399 URLs: original=12 after_dedupe=12 skipped=0 recent_cache_size=24 recent_set_size=24
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m ✅ Extracted page 398 URLs: original=12 after_dedupe=12 skipped=0 recent_cache_size=36 recent_set_size=36
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m ✅ Transformed 3 Page items → 3 ProductUrls items (total_urls_collected=36 after_dedupe=36 duplicates_skipped=0 recent_cache_size=36)
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m 🔍 Starting Stage 3: ProductDetailCrawling
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m 🎯 StageActor stage_product_detail_crawling_actor_session_1755310606_range0_batch0 executing stage ProductDetailCrawling with 3 items
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/smart-wi-fi-dimmer-fan/
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/tapo-smart-iot-hub/
[2m2025-08-16 11:16:47.489 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:47.490 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-9/
[2m2025-08-16 11:16:47.791 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:47.791 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:47.791 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:47.791 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-10/
[2m2025-08-16 11:16:47.931 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:47.931 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:47.931 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:47.932 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/m2d-bridge/
[2m2025-08-16 11:16:48.074 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:48.074 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:48.074 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:48.074 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wifi-window-covering-on-off-6/
[2m2025-08-16 11:16:48.360 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:48.360 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:48.360 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:48.360 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-11/
[2m2025-08-16 11:16:48.374 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:48.374 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:48.374 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:48.374 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/smart-gateway-2-0/
[2m2025-08-16 11:16:48.876 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:48.876 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:48.876 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:48.876 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/smart-rainbow-led/
[2m2025-08-16 11:16:48.879 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:48.879 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:48.879 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:48.879 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/d215p-2/
[2m2025-08-16 11:16:48.922 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:48.922 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:48.922 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:48.922 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-12/
[2m2025-08-16 11:16:49.213 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:49.213 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:49.213 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:49.213 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/smart-plug-12/
[2m2025-08-16 11:16:49.219 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:49.219 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:49.220 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:49.220 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/eve-energy-9/
[2m2025-08-16 11:16:49.705 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:49.705 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:49.705 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:49.705 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-13/
[2m2025-08-16 11:16:49.816 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:49.816 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:49.816 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:49.816 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/eve-energy-10/
[2m2025-08-16 11:16:50.000 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:50.000 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:50.000 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:50.000 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/ua-smartswitch/
[2m2025-08-16 11:16:50.024 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:50.024 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:50.024 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:50.024 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-20/
[2m2025-08-16 11:16:50.130 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:50.130 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:50.130 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:50.130 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/eve-energy-11/
[2m2025-08-16 11:16:50.348 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:50.348 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:50.348 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:50.348 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/extended-color-light-483/
[2m2025-08-16 11:16:50.459 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:50.459 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:50.459 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:50.459 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/ua-smartswitch-2/
[2m2025-08-16 11:16:50.813 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:50.813 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:50.813 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:50.813 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wifi-window-covering-on-off/
[2m2025-08-16 11:16:50.821 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:50.821 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:50.821 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:50.821 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/eve-energy-12/
[2m2025-08-16 11:16:51.207 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:51.207 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:51.207 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:51.207 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wifi-window-covering-on-off-2/
[2m2025-08-16 11:16:51.270 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:51.270 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:51.270 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:51.270 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/ua-smartswitch-3/
[2m2025-08-16 11:16:51.490 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:51.490 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:51.490 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:51.490 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wifi-window-covering-on-off-3/
[2m2025-08-16 11:16:51.563 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:51.563 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:51.563 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:51.563 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wi-fi-window-covering-motor/
[2m2025-08-16 11:16:51.618 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:51.618 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:51.618 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:51.618 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/ua-smartswitch-4/
[2m2025-08-16 11:16:51.832 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:51.832 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:51.832 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:51.832 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wifi-window-covering-on-off-4/
[2m2025-08-16 11:16:51.917 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:51.917 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:51.917 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:51.917 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wi-fi-window-covering-motor-2/
[2m2025-08-16 11:16:52.213 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:52.213 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:52.213 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:52.213 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/ua-smartswitch-5/
[2m2025-08-16 11:16:52.506 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:52.506 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:52.506 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:52.506 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wi-fi-window-covering-motor-3/
[2m2025-08-16 11:16:52.626 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:52.626 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:52.626 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:52.626 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wifi-window-covering-on-off-5/
[2m2025-08-16 11:16:52.982 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:53.024 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:53.024 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:53.024 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:53.024 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/ua-smartswitch-6/
[2m2025-08-16 11:16:53.072 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:53.072 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:53.072 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:53.072 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wi-fi-window-covering-motor-4/
[2m2025-08-16 11:16:53.496 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:53.496 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:53.496 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:53.496 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/ua-smartswitch-7/
[2m2025-08-16 11:16:53.821 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:53.821 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:53.821 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:53.821 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/ma-comfort/
[2m2025-08-16 11:16:54.174 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:54.589 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:54.589 +09:00[0m [32m INFO[0m ✅ Stage ProductDetailCrawling completed successfully: 3/3 items processed
[2m2025-08-16 11:16:54.589 +09:00[0m [32m INFO[0m ✅ Stage 3 (ProductDetailCrawling) completed: 3 success, 0 failed
[2m2025-08-16 11:16:54.589 +09:00[0m [32m INFO[0m 🔄 ProductDetailCrawling → DataValidation: extracting ProductDetails from collected data
[2m2025-08-16 11:16:54.589 +09:00[0m [32m INFO[0m 🔍 Checking item 0 of type: ProductUrls(12 URLs)
[2m2025-08-16 11:16:54.589 +09:00[0m [32m INFO[0m 🔍 Looking for stage result at index 0
[2m2025-08-16 11:16:54.589 +09:00[0m [32m INFO[0m 🔍 Found stage result: success=true, collected_data_present=true
[2m2025-08-16 11:16:54.589 +09:00[0m [32m INFO[0m 🔄 Attempting to parse ProductDetails JSON: 10282 chars
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m ✅ Extracted 12 ProductDetails from ProductUrls
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m 🔍 Checking item 1 of type: ProductUrls(12 URLs)
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m 🔍 Looking for stage result at index 1
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m 🔍 Found stage result: success=true, collected_data_present=true
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m 🔄 Attempting to parse ProductDetails JSON: 10458 chars
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m ✅ Extracted 12 ProductDetails from ProductUrls
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m 🔍 Checking item 2 of type: ProductUrls(12 URLs)
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m 🔍 Looking for stage result at index 2
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m 🔍 Found stage result: success=true, collected_data_present=true
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m 🔄 Attempting to parse ProductDetails JSON: 11058 chars
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m ✅ Extracted 12 ProductDetails from ProductUrls
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m ✅ Transformed 3 ProductUrls items to 3 ProductDetails items (36 total products)
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m 🔍 Starting Stage 4: DataValidation
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m 🎯 StageActor stage_data_validation_actor_session_1755310606_range0_batch0 executing stage DataValidation with 1 items
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m 🔍 DataValidation: validating ProductDetails from item details_36
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m 📋 Processing ProductDetails with 36 products
[2m2025-08-16 11:16:54.590 +09:00[0m [32m INFO[0m ✅ Extracted 36 ProductDetails for validation
[2m2025-08-16 11:16:54.591 +09:00[0m [32m INFO[0m 🔍 Data Quality Analysis Report:
[2m2025-08-16 11:16:54.591 +09:00[0m [32m INFO[0m   � Total products analyzed: 36
[2m2025-08-16 11:16:54.591 +09:00[0m [32m INFO[0m   ✅ Complete products: 36 (100.0%)
[2m2025-08-16 11:16:54.591 +09:00[0m [32m INFO[0m   ⚠️  Incomplete products: 0
[2m2025-08-16 11:16:54.591 +09:00[0m [32m INFO[0m   � Overall quality score: 100.00%
[2m2025-08-16 11:16:54.591 +09:00[0m [32m INFO[0m   🧪 Sample: manf=Some("By TP-Link Systems Inc.") model=Some("Smart Wi-Fi Dimmer Fan") device_type=Some("Matter") cert_id=Some("CSA23637MAT41150-24") vid=Some(5009) pid=Some(515)
[2m2025-08-16 11:16:54.591 +09:00[0m [32m INFO[0m   💾 Storage Recommendation: 🟢 RECOMMENDED - High quality data, safe to store
[2m2025-08-16 11:16:54.592 +09:00[0m [32m INFO[0m ✅ Stage DataValidation completed successfully: 1/1 items processed
[2m2025-08-16 11:16:54.592 +09:00[0m [32m INFO[0m ✅ Stage 4 (DataValidation) completed: 1 success, 0 failed
[2m2025-08-16 11:16:54.592 +09:00[0m [32m INFO[0m 🔄 DataValidation → DataSaving: passing 1 ProductDetails items
[2m2025-08-16 11:16:54.592 +09:00[0m [32m INFO[0m 🔍 Starting Stage 5: DataSaving
[2m2025-08-16 11:16:54.592 +09:00[0m [32m INFO[0m 🎯 StageActor stage_data_saving_actor_session_1755310606_range0_batch0 executing stage DataSaving with 1 items
[2m2025-08-16 11:16:54.592 +09:00[0m [32m INFO[0m [Persist] Enter DataSaving block batch_id=Some("actor_session_1755310606_range0_batch0") variant=ProductDetails
[2m2025-08-16 11:16:54.592 +09:00[0m [32m INFO[0m [PersistGuard] first DataSaving execution proceeding
[2m2025-08-16 11:16:54.592 +09:00[0m [32m INFO[0m [PersistExec] starting storage call variant=ProductDetails
[2m2025-08-16 11:16:54.592 +09:00[0m [32m INFO[0m [PersistExec] handling ProductDetails count=36 extraction_stats=attempted:36 success:36 failed:0
[2m2025-08-16 11:16:54.598 +09:00[0m [32m INFO[0m [Persist] Result status=persist_noop_all_duplicate inserted=0 updated=0 duplicates=36 changed=0 unchanged=0 attempted=36 duration_ms=6
[2m2025-08-16 11:16:54.598 +09:00[0m [32m INFO[0m [PersistEmit] lifecycle emitted status=persist_noop_all_duplicate
[2m2025-08-16 11:16:54.598 +09:00[0m [32m INFO[0m ✅ Stage DataSaving completed successfully: 1/1 items processed
[2m2025-08-16 11:16:54.598 +09:00[0m [32m INFO[0m ✅ Stage 5 (DataSaving) completed: 1 success, 0 failed
[2m2025-08-16 11:16:54.598 +09:00[0m [32m INFO[0m 🏁 [Batch COMPLETE] actor=actor_session_1755310606_range0_batch0, batch_id=actor_session_1755310606_range0_batch0, pages_processed=3
[2m2025-08-16 11:16:54.598 +09:00[0m [32m INFO[0m 📦 [Batch SUMMARY] actor=actor_session_1755310606_range0_batch0, batch_id=actor_session_1755310606_range0_batch0, pages_total=3, success_items=1, failed_items=0, retries_used≈0, duration_ms=8216, products_inserted=0, products_updated=0, deferred_detail=false
[2m2025-08-16 11:16:54.598 +09:00[0m [32m INFO[0m [BatchActorRun] single batch processed successfully — returning to caller
[2m2025-08-16 11:16:54.598 +09:00[0m [32m INFO[0m 🏁 BatchActor actor_session_1755310606_range0_batch0 execution loop ended (single batch success)
[2m2025-08-16 11:16:54.598 +09:00[0m [32m INFO[0m 📡 BatchActor.run() completed with result: Ok(())
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m ✅ BatchActor actor_session_1755310606_range0_batch0 completed REAL processing of 3 pages
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m [RangeLoopTrace] AFTER execute_real_batch_actor (OK) range_idx=0 batch_index=0 pages=[400, 399, 398]
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m [RangeLoop] POST-BATCH range_idx=0 executed_batches=1 expected_batches=1
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m ✅ Range 1 complete | cumulative: 1/2 batches (50.0%), 3/5 pages (60.0%)
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m [RangeLoop] PRE-RANGE-FINAL range_idx=0 cumulative_batches=1 cumulative_pages=3 expected_batches=2 expected_pages=5
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m [RangeLoop] EXIT range_idx=0 cumulative_batches=1 cumulative_pages=3
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m [RangeLoop] ENTER range_idx=1 start_page=397 end_page=396 reverse=true total_ranges=2
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m 🎯 Range 2/2 start: pages 397 to 396 (2 pages => 1 batches, reverse: true)
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m [RangeLoop] BATCH ENTER range_idx=1 batch_index=0 pages=[397, 396]
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m [RangeLoopTrace] BEFORE execute_real_batch_actor range_idx=1 batch_index=0
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m 🎯 BatchActor actor_session_1755310606_range1_batch0 starting REAL processing of 2 pages
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m 🔧 Creating BatchActor instance with real services...
[2m2025-08-16 11:16:54.599 +09:00[0m [32m INFO[0m 🔧 HttpClient using config: max_requests_per_second=50
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m ✅ HttpClient created (labeled)
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m ✅ MatterDataExtractor created
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m 🔧 Using database URL: sqlite:/Users/chanseok/Library/Application Support/matter-certis-v2/database/matter_certis.db
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m ✅ IntegratedProductRepository created with centralized database path
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m ✅ AppConfig provided from ExecutionPlan context
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m 📊 Using batch_size from config: 3
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m ✅ BatchActor created successfully with real services
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m 🔧 Creating communication channels...
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m ✅ Channels created successfully
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m 🔧 Creating BatchConfig...
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m ✅ BatchConfig created: BatchConfig { batch_size: 3, concurrency_limit: 3, batch_delay_ms: 1000, retry_on_failure: true, start_page: Some(397), end_page: Some(396) }
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m 🔧 Creating ProcessBatch command...
[2m2025-08-16 11:16:54.600 +09:00[0m [32m INFO[0m ✅ ProcessBatch command created
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🚀 Starting BatchActor task...
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m ✅ BatchActor task spawned
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 📡 Sending ProcessBatch command...
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m ✅ ProcessBatch command sent
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m ⏳ Waiting for BatchActor completion (deferred shutdown)...
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 📡 BatchActor.run() starting...
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🔄 BatchActor actor_session_1755310606_range1_batch0 starting execution loop
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🔄 [Batch START] actor=actor_session_1755310606_range1_batch0, batch_id=actor_session_1755310606_range1_batch0, pages=2, range=Some((Some(397), Some(396)))
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🧭 [Batch PLAN/APPLIED] planned=(Some(397), Some(396)) applied=Some((Some(397), Some(396))) count=2
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🎭 Using real StageActor-based processing for batch actor_session_1755310606_range1_batch0
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🧠 Using provided SiteStatus hints from Session: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🔍 Starting Stage 2: ListPageCrawling
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🔧 Applied site pagination hints: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🎯 StageActor stage_list_page_crawling_actor_session_1755310606_range1_batch0 executing stage ListPageCrawling with 2 items
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 📊 Using cached site analysis for single page 396: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 📊 Using cached site analysis for single page 397: total_pages=498, products_on_last_page=11
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa-iot_products/page/396/?p_keywords&p_type%5B0%5D=14&p_program_type%5B0%5D=1049&p_certificate&p_family&p_firmware_ver
[2m2025-08-16 11:16:54.601 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa-iot_products/page/397/?p_keywords&p_type%5B0%5D=14&p_program_type%5B0%5D=1049&p_certificate&p_family&p_firmware_ver
[2m2025-08-16 11:16:55.465 +09:00[0m [32m INFO[0m 🎯 Found active page number 397 using selector '.page-numbers.current'
[2m2025-08-16 11:16:55.466 +09:00[0m [32m INFO[0m ✅ Real list page processing successful for page 397: 12 URLs collected
[2m2025-08-16 11:16:55.539 +09:00[0m [32m INFO[0m 🎯 Found active page number 396 using selector '.page-numbers.current'
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m ✅ Real list page processing successful for page 396: 12 URLs collected
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m ✅ Stage ListPageCrawling completed successfully: 2/2 items processed
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m ✅ Stage 2 (ListPageCrawling) completed: 2 success, 0 failed
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m 🔄 ListPageCrawling → ProductDetailCrawling: extracting ProductUrls from collected data
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m ✅ Extracted page 397 URLs: original=12 after_dedupe=12 skipped=0 recent_cache_size=12 recent_set_size=12
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m ✅ Extracted page 396 URLs: original=12 after_dedupe=12 skipped=0 recent_cache_size=24 recent_set_size=24
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m ✅ Transformed 2 Page items → 2 ProductUrls items (total_urls_collected=24 after_dedupe=24 duplicates_skipped=0 recent_cache_size=24)
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m 🔍 Starting Stage 3: ProductDetailCrawling
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m 🎯 StageActor stage_product_detail_crawling_actor_session_1755310606_range1_batch0 executing stage ProductDetailCrawling with 2 items
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-7/
[2m2025-08-16 11:16:55.540 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-19/
[2m2025-08-16 11:16:55.944 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:55.944 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:55.944 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:55.944 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-19/
[2m2025-08-16 11:16:56.267 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:56.267 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:56.267 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:56.268 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-8/
[2m2025-08-16 11:16:56.276 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:56.276 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:56.276 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:56.276 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-21/
[2m2025-08-16 11:16:56.568 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:56.569 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:56.569 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:56.569 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-22/
[2m2025-08-16 11:16:56.822 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:56.822 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:56.822 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:56.822 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-9/
[2m2025-08-16 11:16:57.300 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:57.300 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:57.300 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:57.300 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-14/
[2m2025-08-16 11:16:57.625 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:57.625 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:57.625 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:57.625 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-10/
[2m2025-08-16 11:16:57.723 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:57.723 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:57.723 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:57.723 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/nanoleaf-essentials-lightstrip-11/
[2m2025-08-16 11:16:58.014 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:58.014 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:58.014 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:58.014 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-3/
[2m2025-08-16 11:16:58.034 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:58.034 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:58.034 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:58.034 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-11/
[2m2025-08-16 11:16:58.766 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:58.766 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:58.766 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:58.766 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-12/
[2m2025-08-16 11:16:58.771 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:58.771 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:58.771 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:58.771 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-4/
[2m2025-08-16 11:16:59.175 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:59.175 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:59.175 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:59.175 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-13/
[2m2025-08-16 11:16:59.508 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:59.508 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:59.508 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:59.508 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-5/
[2m2025-08-16 11:16:59.539 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:59.539 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:59.539 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:59.539 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-14/
[2m2025-08-16 11:16:59.829 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:16:59.829 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:16:59.829 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:16:59.829 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-6/
[2m2025-08-16 11:17:00.102 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:17:00.103 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:17:00.103 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:17:00.103 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-15/
[2m2025-08-16 11:17:00.234 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:17:00.234 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:17:00.234 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:17:00.234 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-7/
[2m2025-08-16 11:17:00.505 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:17:00.505 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:17:00.505 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:17:00.505 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-16/
[2m2025-08-16 11:17:00.711 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:17:00.711 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:17:00.711 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:17:00.711 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/wiz-led-lamp-tunable-white-8/
[2m2025-08-16 11:17:01.173 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:17:01.173 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:17:01.174 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:17:01.174 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-17/
[2m2025-08-16 11:17:01.585 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:17:01.585 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:17:01.585 +09:00[0m [32m INFO[0m Collecting details for 1 products
[2m2025-08-16 11:17:01.585 +09:00[0m [32m INFO[0m 🎫 Token acquired for HTTP request
[2m2025-08-16 11:17:01.585 +09:00[0m [32m INFO[0m 🌐 HTTP GET (attempt 1/3) : https://csa-iot.org/csa_product/klite-wifi-led-lamp-full-color-18/
[2m2025-08-16 11:17:02.098 +09:00[0m [32m INFO[0m Successfully collected 1 product details
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m ✅ Stage ProductDetailCrawling completed successfully: 2/2 items processed
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m ✅ Stage 3 (ProductDetailCrawling) completed: 2 success, 0 failed
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🔄 ProductDetailCrawling → DataValidation: extracting ProductDetails from collected data
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🔍 Checking item 0 of type: ProductUrls(12 URLs)
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🔍 Looking for stage result at index 0
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🔍 Found stage result: success=true, collected_data_present=true
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🔄 Attempting to parse ProductDetails JSON: 11013 chars
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m ✅ Extracted 12 ProductDetails from ProductUrls
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🔍 Checking item 1 of type: ProductUrls(12 URLs)
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🔍 Looking for stage result at index 1
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🔍 Found stage result: success=true, collected_data_present=true
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🔄 Attempting to parse ProductDetails JSON: 11461 chars
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m ✅ Extracted 12 ProductDetails from ProductUrls
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m ✅ Transformed 2 ProductUrls items to 2 ProductDetails items (24 total products)
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🔍 Starting Stage 4: DataValidation
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🎯 StageActor stage_data_validation_actor_session_1755310606_range1_batch0 executing stage DataValidation with 1 items
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🔍 DataValidation: validating ProductDetails from item details_24
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 📋 Processing ProductDetails with 24 products
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m ✅ Extracted 24 ProductDetails for validation
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m 🔍 Data Quality Analysis Report:
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m   � Total products analyzed: 24
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m   ✅ Complete products: 24 (100.0%)
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m   ⚠️  Incomplete products: 0
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m   � Overall quality score: 100.00%
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m   🧪 Sample: manf=Some("By Signify") model=Some("Klite WiFi LED Lamp – Full Color") device_type=Some("Matter") cert_id=Some("CSA23665MAT41178-24") vid=Some(5144) pid=Some(28679)
[2m2025-08-16 11:17:02.099 +09:00[0m [32m INFO[0m   💾 Storage Recommendation: 🟢 RECOMMENDED - High quality data, safe to store
[2m2025-08-16 11:17:02.100 +09:00[0m [32m INFO[0m ✅ Stage DataValidation completed successfully: 1/1 items processed
[2m2025-08-16 11:17:02.100 +09:00[0m [32m INFO[0m ✅ Stage 4 (DataValidation) completed: 1 success, 0 failed
[2m2025-08-16 11:17:02.100 +09:00[0m [32m INFO[0m 🔄 DataValidation → DataSaving: passing 1 ProductDetails items
[2m2025-08-16 11:17:02.100 +09:00[0m [32m INFO[0m 🔍 Starting Stage 5: DataSaving
[2m2025-08-16 11:17:02.100 +09:00[0m [32m INFO[0m 🎯 StageActor stage_data_saving_actor_session_1755310606_range1_batch0 executing stage DataSaving with 1 items
[2m2025-08-16 11:17:02.100 +09:00[0m [32m INFO[0m [Persist] Enter DataSaving block batch_id=Some("actor_session_1755310606_range1_batch0") variant=ProductDetails
[2m2025-08-16 11:17:02.100 +09:00[0m [32m INFO[0m [PersistGuard] first DataSaving execution proceeding
[2m2025-08-16 11:17:02.101 +09:00[0m [32m INFO[0m [PersistExec] starting storage call variant=ProductDetails
[2m2025-08-16 11:17:02.101 +09:00[0m [32m INFO[0m [PersistExec] handling ProductDetails count=24 extraction_stats=attempted:24 success:24 failed:0
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m [Persist] Result status=persist_noop_all_duplicate inserted=0 updated=0 duplicates=24 changed=0 unchanged=0 attempted=24 duration_ms=3
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m [PersistEmit] lifecycle emitted status=persist_noop_all_duplicate
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m ✅ Stage DataSaving completed successfully: 1/1 items processed
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m ✅ Stage 5 (DataSaving) completed: 1 success, 0 failed
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m 🏁 [Batch COMPLETE] actor=actor_session_1755310606_range1_batch0, batch_id=actor_session_1755310606_range1_batch0, pages_processed=2
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m 📦 [Batch SUMMARY] actor=actor_session_1755310606_range1_batch0, batch_id=actor_session_1755310606_range1_batch0, pages_total=2, success_items=1, failed_items=0, retries_used≈0, duration_ms=7503, products_inserted=0, products_updated=0, deferred_detail=false
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m [BatchActorRun] single batch processed successfully — returning to caller
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m 🏁 BatchActor actor_session_1755310606_range1_batch0 execution loop ended (single batch success)
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m 📡 BatchActor.run() completed with result: Ok(())
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m ✅ BatchActor actor_session_1755310606_range1_batch0 completed REAL processing of 2 pages
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m [RangeLoopTrace] AFTER execute_real_batch_actor (OK) range_idx=1 batch_index=0 pages=[397, 396]
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m [RangeLoop] POST-BATCH range_idx=1 executed_batches=1 expected_batches=1
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m ✅ Range 2 complete | cumulative: 2/2 batches (100.0%), 5/5 pages (100.0%)
[2m2025-08-16 11:17:02.104 +09:00[0m [32m INFO[0m [RangeLoop] PRE-RANGE-FINAL range_idx=1 cumulative_batches=2 cumulative_pages=5 expected_batches=2 expected_pages=5
[2m2025-08-16 11:17:02.105 +09:00[0m [32m INFO[0m [RangeLoop] EXIT range_idx=1 cumulative_batches=2 cumulative_pages=5
[2m2025-08-16 11:17:02.105 +09:00[0m [32m INFO[0m 🎉 SessionCompleted event emitted for actor_session_1755310606
[2m2025-08-16 11:17:02.105 +09:00[0m [32m INFO[0m 🎉 ExecutionPlan fully executed!
