# ì´ë²¤íŠ¸ ê¸°ë°˜ í¬ë¡¤ë§ ì—”ì§„ v4.0 êµ¬í˜„ ê³„íš

## ğŸ¯ ëª©í‘œ
ê¸°ì¡´ ë‹¨ê³„ë³„(Stage) í¬ë¡¤ë§ ì‹œìŠ¤í…œì„ ì™„ì „íˆ êµì²´í•˜ì—¬, ì‘ì—… í ê¸°ë°˜ì˜ ìœ ì—°í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì´ë²¤íŠ¸ ê¸°ë°˜ ì‹œìŠ¤í…œìœ¼ë¡œ ì „í™˜

## ğŸ—ï¸ ì„¤ê³„ ì§€í–¥ì 

### Modern Rust 2024 + Tauri v2.0 + Clean Code ì² í•™
- **Rust 2024 Edition**: ìµœì‹  Rust ì—ë””ì…˜ì˜ ëª¨ë“  ê¸°ëŠ¥ê³¼ ëª¨ë²” ì‚¬ë¡€ ì ìš©
- **Clippy Compliance**: ëª¨ë“  ì½”ë“œê°€ `clippy::pedantic` ìˆ˜ì¤€ì˜ ë¦°í„° ê·œì¹™ì„ ì¤€ìˆ˜
- **Tauri v2.0 Modern APIs**: ìµœì‹  Tauri ì•„í‚¤í…ì²˜ ê°€ì´ë“œì™€ API íŒ¨í„´ ì ìš©
- **Clean Code ì›ì¹™**: 
  - ëª…í™•í•˜ê³  ì˜ë„ë¥¼ í‘œí˜„í•˜ëŠ” ë„¤ì´ë°
  - ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP) ì ìš©
  - ì˜ì¡´ì„± ì—­ì „ ì›ì¹™ (DIP) êµ¬í˜„
  - í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ (TDD) ì ‘ê·¼
- **Type Safety**: ì»´íŒŒì¼ íƒ€ì„ì— ìµœëŒ€í•œ ë§ì€ ì˜¤ë¥˜ ë°©ì§€
- **Zero-Cost Abstractions**: ëŸ°íƒ€ì„ ì„±ëŠ¥ì— ì˜í–¥ ì—†ëŠ” ì¶”ìƒí™” êµ¬í˜„

---

## ğŸ“Š êµ¬í˜„ í˜„í™© (2025ë…„ 7ì›” 12ì¼ ê¸°ì¤€)

### Phase 1: í•µì‹¬ êµ¬ì¡° ì„¤ê³„ ë° êµ¬í˜„ - ğŸš§ **80% ì™„ë£Œ**
- âœ… **CrawlingTask v4.0 enum ì •ì˜** - Modern Rust 2024 ìŠ¤íƒ€ì¼ë¡œ êµ¬í˜„
- âœ… **SharedState êµ¬ì¡° êµ¬í˜„** - Thread-safe ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ
- âœ… **ì‘ì—… í ì‹œìŠ¤í…œ ì„¤ê³„** - Type-safe ë°±í”„ë ˆì…” ì§€ì› í ì‹œìŠ¤í…œ
- ğŸš§ **ì‘ì—…ì í’€ ì¸í„°í˜ì´ìŠ¤ ì •ì˜** - ì§„í–‰ ì¤‘

### Phase 2: ì‘ì—…ì í’€ êµ¬í˜„ - â³ **ì¤€ë¹„ ì¤‘**
- [ ] ListPageFetcher êµ¬í˜„ (Modern async/await íŒ¨í„´)
- [ ] ListPageParser êµ¬í˜„ (HTML íŒŒì‹± ìµœì í™”)
- [ ] ProductDetailFetcher êµ¬í˜„ (HTTP í´ë¼ì´ì–¸íŠ¸ ì¬ì‚¬ìš©)
- [ ] ProductDetailParser êµ¬í˜„ (êµ¬ì¡°í™”ëœ ë°ì´í„° ì¶”ì¶œ)
- [ ] DbSaver êµ¬í˜„ (ë°°ì¹˜ ì €ì¥ ìµœì í™”)

### Phase 3: ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° êµ¬í˜„ - â³ **ëŒ€ê¸° ì¤‘**
- [ ] ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° ìƒëª…ì£¼ê¸° ê´€ë¦¬
- [ ] ì‘ì—…ì ìƒì„± ë° ìŠ¤ì¼€ì¤„ë§
- [ ] ì·¨ì†Œ í† í° ì‹œìŠ¤í…œ
- [ ] ìƒíƒœ ë¸Œë¡œë“œìºìŠ¤í„° í†µí•©

### Phase 4: í†µí•© ë° í…ŒìŠ¤íŠ¸ - â³ **ëŒ€ê¸° ì¤‘**
- [ ] ê¸°ì¡´ ëª…ë ¹ì–´ ì¸í„°í˜ì´ìŠ¤ êµì²´
- [ ] ë°ì´í„°ë² ì´ìŠ¤ í†µí•©
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ë° ìµœì í™”
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸

### âœ… **ì™„ë£Œëœ í•µì‹¬ ì»´í¬ë„ŒíŠ¸**
1. **`/src/crawling/tasks.rs`** - íƒ€ì… ì•ˆì „í•œ ì‘ì—… ì •ì˜ ì‹œìŠ¤í…œ
   - TaskId with UUID ê¸°ë°˜ ê³ ìœ ì„± ë³´ì¥
   - Clean Code ì›ì¹™ ì ìš©ëœ ProductData ë¹Œë” íŒ¨í„´
   - í¬ê´„ì ì¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í¬í•¨

2. **`/src/crawling/state.rs`** - í˜„ëŒ€ì ì¸ ìƒíƒœ ê´€ë¦¬
   - Arc/RwLock/Mutexë¥¼ í™œìš©í•œ thread-safe ì„¤ê³„
   - ì‹¤ì‹œê°„ í†µê³„ ìˆ˜ì§‘ ë° ì„±ëŠ¥ ë©”íŠ¸ë¦­
   - CancellationToken ê¸°ë°˜ ìš°ì•„í•œ ì¢…ë£Œ ì‹œìŠ¤í…œ

3. **`/src/crawling/queues.rs`** - ê³ ì„±ëŠ¥ ì‘ì—… í ì‹œìŠ¤í…œ
   - ë°±í”„ë ˆì…” ì§€ì›ìœ¼ë¡œ ë©”ëª¨ë¦¬ ì•ˆì •ì„± ë³´ì¥
   - íƒ€ì… ì•ˆì „í•œ ë¼ìš°íŒ… ì‹œìŠ¤í…œ
   - ì‹¤ì‹œê°„ ë©”íŠ¸ë¦­ ë° í…”ë ˆë©”íŠ¸ë¦¬ ì§€ì›

---

## ğŸ—‚ï¸ Modern Rust 2024 + Tauri v2.0 + Clean Code í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src-tauri/
â”œâ”€â”€ Cargo.toml                       # Rust 2024 edition, modern dependencies
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs                       # ë¼ì´ë¸ŒëŸ¬ë¦¬ ì§„ì…ì  (ëª¨ë“  ëª¨ë“ˆ ëª…ì‹œì  ì„ ì–¸)
â”‚   â”œâ”€â”€ main.rs                      # Tauri v2.0 ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚   â”‚
â”‚   â”œâ”€â”€ domain/                      # ğŸ—ï¸ ë„ë©”ì¸ ë ˆì´ì–´ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
â”‚   â”‚   â”œâ”€â”€ entities.rs              # ë„ë©”ì¸ ì—”í‹°í‹° (Product, CrawlingSession, Task)
â”‚   â”‚   â”œâ”€â”€ value_objects.rs         # ê°’ ê°ì²´ (TaskId, Url, ProductData)
â”‚   â”‚   â”œâ”€â”€ services.rs              # ë„ë©”ì¸ ì„œë¹„ìŠ¤ (CrawlingOrchestrator, DataValidator)
â”‚   â”‚   â””â”€â”€ events.rs                # ë„ë©”ì¸ ì´ë²¤íŠ¸ (TaskEvents, CrawlingEvents)
â”‚   â”‚
â”‚   â”œâ”€â”€ application/                 # ğŸ¯ ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆì´ì–´ (Use Cases)
â”‚   â”‚   â”œâ”€â”€ use_cases.rs             # ì‚¬ìš© ì‚¬ë¡€ (StartCrawling, StopCrawling, GetStatus)
â”‚   â”‚   â”œâ”€â”€ ports.rs                 # í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤ (Repository, HttpClient, EventPublisher)
â”‚   â”‚   â””â”€â”€ dto.rs                   # ë°ì´í„° ì „ì†¡ ê°ì²´ (CrawlingRequest, CrawlingResponse)
â”‚   â”‚
â”‚   â”œâ”€â”€ infrastructure/              # ğŸ”§ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ ë ˆì´ì–´ (ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™)
â”‚   â”‚   â”œâ”€â”€ adapters.rs              # ì–´ëŒ‘í„° (DatabaseRepository, HttpClient, EventPublisher)
â”‚   â”‚   â”œâ”€â”€ workers.rs               # ì‘ì—…ì (ListFetcher, Parser, DetailFetcher, DbSaver)
â”‚   â”‚   â”œâ”€â”€ queues.rs                # í ì‹œìŠ¤í…œ (TaskQueue, QueueManager)
â”‚   â”‚   â””â”€â”€ config.rs                # ì„¤ì • ê´€ë¦¬ (AppConfig)
â”‚   â”‚
â”‚   â”œâ”€â”€ presentation/                # ğŸ¨ í”„ë ˆì  í…Œì´ì…˜ ë ˆì´ì–´ (UI/API)
â”‚   â”‚   â”œâ”€â”€ tauri_handlers.rs        # Tauri v2.0 ëª…ë ¹ì–´ í•¸ë“¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ dto.rs                   # í”„ë ˆì  í…Œì´ì…˜ DTO (SystemStatePayload, UiEvents)
â”‚   â”‚   â””â”€â”€ validators.rs            # ì…ë ¥ ê²€ì¦ (RequestValidator)
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                      # ğŸ”§ ê³µìœ  ìœ í‹¸ë¦¬í‹° (Cross-cutting Concerns)
â”‚   â”‚   â”œâ”€â”€ telemetry.rs             # ê´€ì°° ê°€ëŠ¥ì„± (Metrics, Tracing, Logging)
â”‚   â”‚   â”œâ”€â”€ error.rs                 # ì—ëŸ¬ ì²˜ë¦¬ (ErrorTypes, ErrorHandler)
â”‚   â”‚   â”œâ”€â”€ utils.rs                 # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ (TimeUtils, StringUtils)
â”‚   â”‚   â””â”€â”€ constants.rs             # ìƒìˆ˜ ì •ì˜ (AppConstants)
â”‚   â”‚
â”‚   â””â”€â”€ tests/                       # ğŸ§ª í†µí•© í…ŒìŠ¤íŠ¸
â”‚       â”œâ”€â”€ integration.rs           # í†µí•© í…ŒìŠ¤íŠ¸ (CrawlingWorkflow, TauriCommands)
â”‚       â””â”€â”€ fixtures.rs              # í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜ (TestData)
â”‚
â””â”€â”€ tests/                           # ğŸ“‹ E2E í…ŒìŠ¤íŠ¸ (í”„ë¡œì íŠ¸ ë£¨íŠ¸)
    â”œâ”€â”€ crawling_e2e_test.rs
    â””â”€â”€ performance_test.rs
```

### ğŸš€ Modern Rust 2024 "No mod.rs" ì² í•™ êµ¬í˜„

#### 1. **ì™„ì „í•œ mod.rs ì œê±°**
- âœ… ëª¨ë“  ëª¨ë“ˆì„ íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì •ì˜
- âœ… lib.rsì—ì„œ ëª…ì‹œì  ëª¨ë“ˆ ì„ ì–¸: `pub mod domain;`
- âœ… ë‹¨ì¼ íŒŒì¼ë¡œ ê´€ë ¨ ê¸°ëŠ¥ ê·¸ë£¹í™” (entities.rs, services.rs ë“±)

#### 2. **Clean Architecture ë ˆì´ì–´ ë¶„ë¦¬**
```rust
// lib.rs ì˜ˆì‹œ
pub mod domain;        // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (ì™¸ë¶€ ì˜ì¡´ì„± ì—†ìŒ)
pub mod application;   // ì‚¬ìš© ì‚¬ë¡€ (domainë§Œ ì˜ì¡´)
pub mod infrastructure; // ì™¸ë¶€ ì‹œìŠ¤í…œ (domain ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„)
pub mod presentation;  // UI/API (application ì‚¬ìš©)
pub mod shared;        // ê³µìœ  ìœ í‹¸ë¦¬í‹°
```

#### 3. **íŒŒì¼ë³„ ì±…ì„ ë¶„ë¦¬**
- **`entities.rs`**: ëª¨ë“  ë„ë©”ì¸ ì—”í‹°í‹° í•œ ê³³ì—
- **`value_objects.rs`**: ëª¨ë“  ê°’ ê°ì²´ í•œ ê³³ì—
- **`services.rs`**: ëª¨ë“  ë„ë©”ì¸ ì„œë¹„ìŠ¤ í•œ ê³³ì—
- **`ports.rs`**: ëª¨ë“  í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤ í•œ ê³³ì—
- **`adapters.rs`**: ëª¨ë“  ì–´ëŒ‘í„° êµ¬í˜„ í•œ ê³³ì—

---

## ğŸ”§ ì¦‰ì‹œ ì°©ìˆ˜ ê°€ëŠ¥í•œ ì²« ë²ˆì§¸ ë‹¨ê³„

### 1. ëª¨ë“ˆ êµ¬ì¡° ìƒì„±
ê¸°ë³¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°ì™€ ëª¨ë“ˆ íŒŒì¼ë“¤ì„ ìƒì„±í•©ë‹ˆë‹¤.

### 2. CrawlingTask v4.0 ì •ì˜
SystemStatePayloadì™€ í˜¸í™˜ë˜ëŠ” ì‘ì—… ì •ì˜ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

### 3. SharedState êµ¬ì¡°
ë°±ì—”ë“œ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ í•µì‹¬ êµ¬ì¡°ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

**ë°”ë¡œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?**
